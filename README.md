Название проекта
Telegram Booking Bot with CalDAV Integration

Описание
Telegram Booking Bot with CalDAV Integration — это телеграм-бот для бронирования занятий с преподавателем, интегрированный с apple календарями через протокол CalDAV. Проект позволяет пользователям выбирать доступные даты и временные слоты, создавать события в календарях, а также управлять бронированием через удобный интерфейс Telegram.

Бот поддерживает интеграцию с сервисами iCloud Calendar и другими совместимыми CalDAV серверами.
ВАЖНО: стоит учитывать, что на данный момент, при бронировании события, оно может не сразу обновиться в календаре, если не синхроинизровать на телефоне calDAV сервер с приложением календаря.
Чтобы синхронизироваться, требуется:
1) Перейти в настройки телефона
2) Найти раздел "Календарь"
3) Далее перейти в "Учетные записи"
4) Выбрать "Добавить учетную запись"
5) Выбрать "Другое"
6) Выбрать "Учетная запись CalDav"
7) Настроить подключение и успешно синхронизировать календарь с сервером

Возможности
- Выбор даты и времени бронирования через Telegram:
  - Пользователь может выбирать дату через интуитивно понятный календарь.
  - Поддержка часовых слотов с отображением занятых и доступных часов.
- Создание событий в календаре:
  - Интеграция с CalDAV для добавления событий в iCloud или другие поддерживаемые календари.
  - Учет временных зон для корректного отображения событий.
- Управление занятыми слотами:
  - Проверка на занятость времени перед добавлением нового события.
  - Динамическое обновление интерфейса с учетом текущих бронирований.
- Поддержка многошагового ввода:
  - Ввод имени, фамилии и выбора языка пользователя при первом запуске.
  - Возможность многократного бронирования через главное меню.
- Управление сообщениями Telegram:
  - Кнопка "Закончить бронирование на этот день" для возврата в главное меню.

Технологии
- Язык: Python 3.9+
- Библиотеки:
  - aiogram — для разработки Telegram-бота.
  - caldav — для взаимодействия с CalDAV сервером.
  - icalendar — для парсинга и генерации событий в формате iCalendar.
  - pytz и dateutil — для работы с временными зонами.
- Интеграция с iCloud:
  - Использование сгенерированного пароля приложения для безопасной аутентификации.

Установка и запуск
1. Клонируйте репозиторий:
   git clone https://github.com/coldborne/BookingMeetingsWithTeacher.git
   cd BookingMeetingsWithTeacher

2. Создайте виртуальное окружение и установите зависимости:
   python -m venv venv
   source venv/bin/activate  # Для Linux/Mac
   venv\Scripts\activate     # Для Windows
   pip install -r requirements.txt

3. Настройте переменные окружения:
   Создайте файл .env в корневой папке и добавьте следующие параметры:
   API_TOKEN=<ваш_токен_бота>
   CALDAV_URL=https://caldav.icloud.com/
   CALDAV_USERNAME=<ваш_логин>
   CALDAV_APP_PASSWORD=<ваш_пароль_приложения>

4. Запустите бота:
   python telegram_bot.py

Структура проекта
```
.
├── .venv/
├── telegram/
│   ├── __init__.py
│   ├── handlers/
│   │   ├── __init__.py
│   │   ├── user_data_handler.py
│   │   ├── telegram_bot.py
│   ├── services/
│   │   ├── __init__.py
│   │   ├── user_service.py
│   │   ├── cal_dav_service.py
│   │   ├── apple_calendar.py
│   ├── utils/
│   │   ├── __init__.py
│   │   ├── menu_builder.py
│   │   ├── callback_data.py
│   ├── models/
│   │   ├── __init__.py
│   │   ├── database.py
│   │   ├── models.py
│   ├── config/
│   │   ├── __init__.py
│   │   ├── consts.py
│   │   ├── logging_config.py
├── main.py
```

Как использовать
1. Запустите бота.
2. В Telegram начните диалог с ботом, отправив команду /start.
3. Следуйте инструкциям:
   - Введите имя, фамилию и выберите язык программирования.
   - Выберите действие в главном меню, например, "Бронировать событие".
   - Выберите дату и время.
   - Подтвердите бронирование или закончите его, вернувшись в главное меню.

Планы на будущее
- Возможность отмены и редактирования бронирований.
- Улучшение системы уведомлений и логирования.

Контрибьютинг
Приветствуются любые предложения и доработки! Для добавления изменений:
1. Создайте форк репозитория.
2. Внесите изменения в отдельной ветке.
3. Создайте Pull Request с описанием изменений.

Лицензия
Этот проект распространяется под лицензией MIT. Подробности в файле LICENSE.

Авторы
- Вячеслав Валенкевич Леонидович — Разработчик и архитектор системы. 
